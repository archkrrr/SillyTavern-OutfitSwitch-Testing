<div id="outfit-switcher-settings" class="extension_container cs-theme">
    <div class="inline-drawer is-open">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>Outfit Switcher</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <div class="cs-shell">
                <section class="cs-card cs-header-card">
                    <div class="cs-header-intro">
                        <h2 class="cs-title">Outfit Switcher</h2>
                        <p class="cs-subtitle">A streamlined, single-character variant of Costume Switcher with automatic keyword triggers and manual overrides.</p>
                    </div>
                    <div class="cs-header-meta">
                        <div class="cs-build-meta" role="status" aria-live="polite">
                            <div class="cs-build-badges">
                                <span class="cs-build-pill" id="os-build-version">Loadingâ€¦</span>
                            </div>
                            <span class="cs-build-note" id="os-build-note"></span>
                        </div>
                        <div class="cs-header-controls">
                            <label class="cs-master-toggle">
                                <input id="os-enable" type="checkbox" />
                                <span class="cs-switch-thumb" aria-hidden="true"></span>
                                <div class="cs-switch-copy">
                                    <strong>Enable Outfit Switching</strong>
                                </div>
                            </label>
                        </div>
                    </div>
                </section>

                <section class="cs-card cs-profile-card">
                    <header class="cs-card-header">
                        <div class="cs-card-title">
                            <i class="fa-solid fa-id-badge"></i>
                            <div>
                                <h3>Profiles</h3>
                                <p>Save multiple outfit presets for the same focus character.</p>
                            </div>
                        </div>
                        <span id="os-profile-pill" class="cs-profile-pill" role="status" aria-live="polite">Active: <strong>Default</strong></span>
                    </header>
                    <div class="cs-card-body cs-card-body--stacked">
                        <div class="cs-toolbar cs-toolbar--wrap">
                            <label class="cs-field cs-field-inline">
                                <span>Active Profile</span>
                                <select id="os-profile-select" class="text_pole" title="Choose a saved profile"></select>
                                <div class="cs-profile-io">
                                    <button id="os-profile-export" class="menu_button interactable cs-button-ghost" type="button" title="Export the active profile to a JSON file">
                                        <i class="fa-solid fa-file-arrow-down"></i>
                                        <span>Export</span>
                                    </button>
                                    <button id="os-profile-import" class="menu_button interactable cs-button-ghost" type="button" title="Import a profile from a JSON file">
                                        <i class="fa-solid fa-file-arrow-up"></i>
                                        <span>Import</span>
                                    </button>
                                </div>
                            </label>
                            <div class="cs-profile-actions">
                                <button id="os-profile-create" class="menu_button interactable cs-button-ghost" type="button" title="Create a fresh profile from defaults">
                                    <i class="fa-solid fa-plus"></i>
                                    <span>New</span>
                                </button>
                                <button id="os-profile-duplicate" class="menu_button interactable cs-button-ghost" type="button" title="Duplicate the active profile">
                                    <i class="fa-solid fa-copy"></i>
                                    <span>Duplicate</span>
                                </button>
                                <button id="os-profile-rename" class="menu_button interactable cs-button-ghost" type="button" title="Rename the active profile">
                                    <i class="fa-solid fa-pen"></i>
                                    <span>Rename</span>
                                </button>
                                <button id="os-profile-delete" class="menu_button interactable cs-button-danger" type="button" title="Delete the active profile">
                                    <i class="fa-solid fa-trash"></i>
                                    <span>Delete</span>
                                </button>
                            </div>
                            <input id="os-profile-import-file" type="file" accept=".json" hidden />
                        </div>
                        <p class="cs-helper-text">Profiles capture the base folder, variants, and triggers so you can hop between arcs or timelines without rebuilding your shortcuts.</p>
                    </div>
                </section>

                <div class="cs-layout">
                    <div class="cs-column">
                        <section class="cs-card">
                            <header class="cs-card-header">
                                <div class="cs-card-title">
                                    <i class="fa-solid fa-folder-tree"></i>
                                    <div>
                                        <h3>Character Folder</h3>
                                        <p>Pick the root folder Costume Switcher already uses for this avatar.</p>
                                    </div>
                                </div>
                                <div class="cs-card-actions">
                                    <button id="os-run-base" class="menu_button interactable cs-button-primary" type="button" title="Run the base folder immediately">
                                        <i class="fa-solid fa-play"></i>
                                        <span>Run Base Outfit</span>
                                    </button>
                                </div>
                            </header>
                            <div class="cs-card-body">
                                <label class="cs-field">
                                    <span>Base Character Folder</span>
                                    <div class="cs-folder-picker">
                                        <input id="os-base-folder" class="text_pole" type="text" placeholder="Character folder" />
                                        <button id="os-base-folder-select" class="menu_button interactable cs-button-ghost cs-folder-button" type="button" title="Browse to your focus character's folder">
                                            <i class="fa-solid fa-folder-open"></i>
                                            <span>Pick Folder</span>
                                        </button>
                                    </div>
                                </label>
                                <p class="cs-helper-text">Folder paths are relative to your SillyTavern characters directory. Keep this in sync with the focus character you plan to swap outfits for.</p>
                            </div>
                        </section>

                        <section class="cs-card">
                            <header class="cs-card-header">
                                <div class="cs-card-title">
                                    <i class="fa-solid fa-shirt"></i>
                                    <div>
                                        <h3>Outfit Variants</h3>
                                        <p>Create quick shortcuts for alternate outfit folders.</p>
                                    </div>
                                </div>
                                <div class="cs-card-actions">
                                    <button id="os-add-variant" class="menu_button interactable cs-button-ghost" type="button" title="Add a new outfit row">
                                        <i class="fa-solid fa-plus"></i>
                                        <span>Add Variant</span>
                                    </button>
                                </div>
                            </header>
                            <div class="cs-card-body">
                                <p class="cs-helper-text">Variants show up as quick actions and append their subfolder to the base folder before running <code>/costume</code>.</p>
                                <div class="cs-table-scroll">
                                    <table class="cs-table cs-variant-table">
                                        <thead>
                                            <tr>
                                                <th scope="col">Variant Name</th>
                                                <th scope="col">Subfolder</th>
                                                <th scope="col">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="os-variant-table-body"></tbody>
                                    </table>
                                </div>
                                <p class="cs-helper-text">Subfolders can be relative (e.g., <code>formal</code>) or nested (e.g., <code>event/winter</code>).</p>
                            </div>
                        </section>
                    </div>

                    <div class="cs-column cs-column--wide">
                        <section class="cs-card">
                            <header class="cs-card-header">
                                <div class="cs-card-title">
                                    <i class="fa-solid fa-terminal"></i>
                                    <div>
                                        <h3>Triggers</h3>
                                        <p>Map optional slash commands or manual triggers to variant folders.</p>
                                    </div>
                                </div>
                                <div class="cs-card-actions">
                                    <button id="os-add-trigger" class="menu_button interactable cs-button-ghost" type="button" title="Add a new trigger row">
                                        <i class="fa-solid fa-plus"></i>
                                        <span>Add Trigger</span>
                                    </button>
                                </div>
                            </header>
                            <div class="cs-card-body">
                                <p class="cs-helper-text">Use <code>/outfitswitch &lt;trigger&gt;</code> in chat or press <strong>Run</strong> to apply the linked outfit immediately. The same triggers fire automatically whenever matching text appears in chat, even while a reply is still streaming. Each entry accepts multiple keywords separated by commas or new lines.</p>
                                <div class="cs-table-scroll">
                                    <table class="cs-table cs-trigger-table">
                                        <thead>
                                            <tr>
                                                <th scope="col">Trigger Keywords</th>
                                                <th scope="col">Variant Folder</th>
                                                <th scope="col">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="os-trigger-table-body"></tbody>
                                    </table>
                                </div>
                                <p class="cs-helper-text">Examples: <code>winter</code>, <code>combat</code>, or even <code>/regex/</code> patterns.</p>
                            </div>
                        </section>
                    </div>
                </div>

                <div id="os-status" class="cs-status" role="status" aria-live="polite">
                    <i class="fa-solid fa-circle-info" aria-hidden="true"></i>
                    <span id="os-status-text" class="cs-status-text">Ready</span>
                </div>
            </div>
        </div>
    </div>
</div>
